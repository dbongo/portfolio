<div class="container">
    <alert ng-repeat="alert in vm.alerts" type="{{alert.type}}" close="vm.closeAlert($index)">
        {{alert.msg}}
    </alert>
    <form name="form" role="form" class="form-horizontal" ng-submit="vm.register(form)">
        <fieldset>
            <legend>Sign up</legend>
            <div class="form-group" ng-class="form.email.$invalid?'has-error':'has-success'">
                <label for="email" class="col-sm-2 control-label">
                    Email
                </label>
                <div class="col-sm-10">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-envelope"></i>
                        </span>
                        <input id="email" name="email" type="text" class="form-control" placeholder="Email" ng-model="vm.user.email" required>
                    </div>
                    <span class="help-block" ng-show="form.email.$error.email">
                        Please enter a valid email address
                    </span>
                </div>
            </div>
            <div class="form-group" ng-class="form.username.$invalid?'has-error':'has-success'">
                <label for="username" class="col-sm-2 control-label">
                    Username
                </label>
                <div class="col-sm-10">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-envelope"></i>
                        </span>
                        <input id="username" name="username" type="text" class="form-control" placeholder="Username" ng-model="vm.user.username" required>
                    </div>
                    <span class="help-block" ng-show="form.username.$error.username">
                        Please enter a valid username
                    </span>
                </div>
            </div>
            <div class="form-group" ng-class="form.password.$invalid?'has-error':'has-success'">
                <label for="password" class="col-sm-2 control-label">
                    Password
                </label>
                <div class="col-sm-10">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-key"></i>
                        </span>
                        <input id="password" name="password" type="password" class="form-control" placeholder="Password" ng-model="vm.user.password" required>
                    </div>
                </div>
            </div>
            <div ng-show='form.password.$valid' class="form-group" ng-class="form.password2.$error.match?'has-error':'has-success'">
                <label for="password2" class="col-sm-2 control-label">
                    Repeat Password
                </label>
                <div class="col-sm-10">
                    <input id="password2" name="password2" type="password" class="form-control" placeholder="Repeat Password" ng-model="vm.user.password2" match="vm.user.password">
                    <span class="help-block" ng-show="form.password2.$error.match">
                        Both passwords must be the same
                    </span>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-success">
                        Create
                    </button>
                    <a class="btn btn-link" ui-sref="login">
                        Already have an account?
                    </a>
                </div>
            </div>
        </fieldset>
    </form>
</div>
